(declare-const A1 Int)
(declare-const A2 Int)
(declare-const A3 Int)
(declare-const A4 Int)
(declare-const A5 Int)
(declare-const A6 Int)
(declare-const A7 Int)
(declare-const A8 Int)
(declare-const A9 Int)
(declare-const B1 Int)
(declare-const B2 Int)
(declare-const B3 Int)
(declare-const B4 Int)
(declare-const B5 Int)
(declare-const B6 Int)
(declare-const B7 Int)
(declare-const B8 Int)
(declare-const B9 Int)
(declare-const C1 Int)
(declare-const C2 Int)
(declare-const C3 Int)
(declare-const C4 Int)
(declare-const C5 Int)
(declare-const C6 Int)
(declare-const C7 Int)
(declare-const C8 Int)
(declare-const C9 Int)
(declare-const D1 Int)
(declare-const D2 Int)
(declare-const D3 Int)
(declare-const D4 Int)
(declare-const D5 Int)
(declare-const D6 Int)
(declare-const D7 Int)
(declare-const D8 Int)
(declare-const D9 Int)
(declare-const E1 Int)
(declare-const E2 Int)
(declare-const E3 Int)
(declare-const E4 Int)
(declare-const E5 Int)
(declare-const E6 Int)
(declare-const E7 Int)
(declare-const E8 Int)
(declare-const E9 Int)
(declare-const F1 Int)
(declare-const F2 Int)
(declare-const F3 Int)
(declare-const F4 Int)
(declare-const F5 Int)
(declare-const F6 Int)
(declare-const F7 Int)
(declare-const F8 Int)
(declare-const F9 Int)
(declare-const G1 Int)
(declare-const G2 Int)
(declare-const G3 Int)
(declare-const G4 Int)
(declare-const G5 Int)
(declare-const G6 Int)
(declare-const G7 Int)
(declare-const G8 Int)
(declare-const G9 Int)
(declare-const H1 Int)
(declare-const H2 Int)
(declare-const H3 Int)
(declare-const H4 Int)
(declare-const H5 Int)
(declare-const H6 Int)
(declare-const H7 Int)
(declare-const H8 Int)
(declare-const H9 Int)
(declare-const I1 Int)
(declare-const I2 Int)
(declare-const I3 Int)
(declare-const I4 Int)
(declare-const I5 Int)
(declare-const I6 Int)
(declare-const I7 Int)
(declare-const I8 Int)
(declare-const I9 Int)

;ensures that the integers are between 1 and 9
(define-fun AnswerLimit ((Square Int)) Bool
   (or (= Square 1) (= Square 2) (= Square 3) (= Square 4) (= Square 5) (= Square 6) 
   (= Square 7) (= Square 8) (= Square 9))
)

;returns the biggest of 2 integers
(define-fun MaxOf ((A Int) (B Int)) Int
    (ite (> A B) A B)
)

;returns the biggest of 3 integers
(define-fun MaxOf ((A Int) (B Int) (C Int)) Int
    (ite (> A B) (ite (> A C) A C) (ite (> B C) B C))
)

;returns the biggest of 4 integers
(define-fun MaxOf ((A Int) (B Int) (C Int) (D Int)) Int
    (ite (> (MaxOf A B C) D) (MaxOf A B C) D)
)

;returns the biggest of 5 integers
(define-fun MaxOf ((A Int) (B Int) (C Int) (D Int) (E Int)) Int
    (ite (> (MaxOf A B C D) E) (MaxOf A B C D) E)
)

;returns the biggest of 6 integers
(define-fun MaxOf ((A Int) (B Int) (C Int) (D Int) (E Int) (F Int)) Int
    (ite (> (MaxOf A B C D E) F) (MaxOf A B C D E) F)
)

;returns the biggest of 7 integers
(define-fun MaxOf ((A Int) (B Int) (C Int) (D Int) (E Int) (F Int) (G Int)) Int
    (ite (> (MaxOf A B C D E F) G) (MaxOf A B C D E F) G)
)

;returns the biggest of 8 integers
(define-fun MaxOf ((A Int) (B Int) (C Int) (D Int) (E Int) (F Int) (G Int) (H Int)) Int
    (ite (> (MaxOf A B C D E F G) H) (MaxOf A B C D E F G) H)
)

;returns the amount of bulidings seen by an observer
(define-fun Count ((A Int) (B Int) (C Int) (D Int) (E Int) (F Int) (G Int) (H Int) (I Int)) Int
    (+
        1 ;the first buliding is always seen
        (ite (> B A) 1 0)
        (ite (> C (MaxOf A B)) 1 0)
        (ite (> D (MaxOf A B C)) 1 0)
        (ite (> E (MaxOf A B C D)) 1 0) 
        (ite (> F (MaxOf A B C D E)) 1 0)        
        (ite (> G (MaxOf A B C D E F)) 1 0)   
        (ite (> H (MaxOf A B C D E F G)) 1 0)  
        (ite (> I (MaxOf A B C D E F G H)) 1 0)   
    )
)

;takes a column/row and the number of buildings seen from both sides of it and asserts
(define-fun AssertCount ((A Int) (B Int) (C Int) (D Int) (E Int) (F Int) (G Int) (H Int) (I Int) (Left Int) (Right Int)) Bool
    (and
        (= (Count A B C D E F G H I) Left)
        (= (Count I H G F E D C B A) Right)
    )
)

(assert
    (and

        (AnswerLimit A1)
        (AnswerLimit A2)
        (AnswerLimit A3)
        (AnswerLimit A4)
        (AnswerLimit A5)
        (AnswerLimit A6)
        (AnswerLimit A7)
        (AnswerLimit A8)
        (AnswerLimit A9)
        (AnswerLimit B1)
        (AnswerLimit B2)
        (AnswerLimit B3)
        (AnswerLimit B4)
        (AnswerLimit B5)
        (AnswerLimit B6)
        (AnswerLimit B7)
        (AnswerLimit B8)
        (AnswerLimit B9)
        (AnswerLimit C1)
        (AnswerLimit C2)
        (AnswerLimit C3)
        (AnswerLimit C4)
        (AnswerLimit C5)
        (AnswerLimit C6)
        (AnswerLimit C7)
        (AnswerLimit C8)
        (AnswerLimit C9)
        (AnswerLimit D1)
        (AnswerLimit D2)
        (AnswerLimit D3)
        (AnswerLimit D4)
        (AnswerLimit D5)
        (AnswerLimit D6)
        (AnswerLimit D7)
        (AnswerLimit D8)
        (AnswerLimit D9)
        (AnswerLimit E1)
        (AnswerLimit E2)
        (AnswerLimit E3)
        (AnswerLimit E4)
        (AnswerLimit E5)
        (AnswerLimit E6)
        (AnswerLimit E7)
        (AnswerLimit E8)
        (AnswerLimit E9)
        (AnswerLimit F1)
        (AnswerLimit F2)
        (AnswerLimit F3)
        (AnswerLimit F4)
        (AnswerLimit F5)
        (AnswerLimit F6)
        (AnswerLimit F7)
        (AnswerLimit F8)
        (AnswerLimit F9)
        (AnswerLimit G1)
        (AnswerLimit G2)
        (AnswerLimit G3)
        (AnswerLimit G4)
        (AnswerLimit G5)
        (AnswerLimit G6)
        (AnswerLimit G7)
        (AnswerLimit G8)
        (AnswerLimit G9)
        (AnswerLimit H1)
        (AnswerLimit H2)
        (AnswerLimit H3)
        (AnswerLimit H4)
        (AnswerLimit H5)
        (AnswerLimit H6)
        (AnswerLimit H7)
        (AnswerLimit H8)
        (AnswerLimit H9)
        (AnswerLimit I1)
        (AnswerLimit I2)
        (AnswerLimit I3)
        (AnswerLimit I4)
        (AnswerLimit I5)
        (AnswerLimit I6)
        (AnswerLimit I7)
        (AnswerLimit I8)
        (AnswerLimit I9)

        ;Ensure that every row and column contain distinct numbers
        (distinct A1 A2 A3 A4 A5 A6 A7 A8 A9)
        (distinct B1 B2 B3 B4 B5 B6 B7 B8 B9)
        (distinct C1 C2 C3 C4 C5 C6 C7 C8 C9)
        (distinct D1 D2 D3 D4 D5 D6 D7 D8 D9)
        (distinct E1 E2 E3 E4 E5 E6 E7 E8 E9)
        (distinct F1 F2 F3 F4 F5 F6 F7 F8 F9)
        (distinct G1 G2 G3 G4 G5 G6 G7 G8 G9)
        (distinct H1 H2 H3 H4 H5 H6 H7 H8 H9)
        (distinct I1 I2 I3 I4 I5 I6 I7 I8 I9)

        (distinct A1 B1 C1 D1 E1 F1 G1 H1 I1)
        (distinct A2 B2 C2 D2 E2 F2 G2 H2 I2)
        (distinct A3 B3 C3 D3 E3 F3 G3 H3 I3)
        (distinct A4 B4 C4 D4 E4 F4 G4 H4 I4)
        (distinct A5 B5 C5 D5 E5 F5 G5 H5 I5)
        (distinct A6 B6 C6 D6 E6 F6 G6 H6 I6)
        (distinct A7 B7 C7 D7 E7 F7 G7 H7 I7)
        (distinct A8 B8 C8 D8 E8 F8 G8 H8 I8)
        (distinct A9 B9 C9 D9 E9 F9 G9 H9 I9)

        ;The already given values
        (= D1 3)
        (= A2 1)
        (= G2 2)
        (= B3 1)
        (= D3 5)
        (= F3 2)
        (= H3 6)
        (= G4 5)
        (= I4 2)
        (= B5 7)
        (= C5 6)
        (= F5 1)
        (= E6 7)
        (= B7 2)
        (= C7 4)
        (= E7 1)
        (= A8 4)
        (= C8 8)
        (= I8 5)
        (= B9 6)

        (AssertCount A1 B1 C1 D1 E1 F1 G1 H1 I1 3 3)
        (AssertCount A2 B2 C2 D2 E2 F2 G2 H2 I2 4 3)
        (AssertCount A3 B3 C3 D3 E3 F3 G3 H3 I3 2 1)
        (AssertCount A4 B4 C4 D4 E4 F4 G4 H4 I4 2 5)
        (AssertCount A5 B5 C5 D5 E5 F5 G5 H5 I5 1 4)
        (AssertCount A6 B6 C6 D6 E6 F6 G6 H6 I6 3 2)
        (AssertCount A7 B7 C7 D7 E7 F7 G7 H7 I7 3 2)
        (AssertCount A8 B8 C8 D8 E8 F8 G8 H8 I8 3 4)
        (AssertCount A9 B9 C9 D9 E9 F9 G9 H9 I9 3 4)

        (AssertCount A1 A2 A3 A4 A5 A6 A7 A8 A9 3 4)
        (AssertCount B1 B2 B3 B4 B5 B6 B7 B8 B9 2 3)
        (AssertCount C1 C2 C3 C4 C5 C6 C7 C8 C9 4 1)
        (AssertCount D1 D2 D3 D4 D5 D6 D7 D8 D9 4 4)
        (AssertCount E1 E2 E3 E4 E5 E6 E7 E8 E9 3 2)
        (AssertCount F1 F2 F3 F4 F5 F6 F7 F8 F9 2 4)
        (AssertCount G1 G2 G3 G4 G5 G6 G7 G8 G9 1 5)
        (AssertCount H1 H2 H3 H4 H5 H6 H7 H8 H9 3 2)
        (AssertCount I1 I2 I3 I4 I5 I6 I7 I8 I9 3 5)
    )
)

(check-sat)
(get-model)
(exit)